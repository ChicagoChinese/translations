<%inherit file='base.html'/>

<%block name='title_block'>CMS</%block>

<%block name='extrahead'>
<link rel='stylesheet' href='${ROOT}css/cms.css'>
<script src='https://unpkg.com/vue/dist/vue.js'></script>
</%block>

<%def name='form_input(name)'>
  <div class='form-group'>
    <label>${name.capitalize()}</label>
    <input class='form-control' name='${name}' :value='workingCopy.${name}'>
  </div>
</%def>

<body>

<div id='app'>
  <div class='sidebar'>
    <select v-model='category' @change='choseCategory'>
    % for cat in categories:
      <option value='${cat}'>${cat.capitalize()}</option>
    % endfor
    </select>

    <button class='btn btn-primary btn-sm'>New translation</button>

    <ul>
      <li v-for='doc in docs' :class='{selected: isSelected(doc.slug)}'>
        <a @click='choseDoc(doc.slug)'>{{ doc.title }}</a>
      </li>
    </ul>
  </div>
  <main>
    <form @submit.prevent='submit'>
      <div class='form-group'>
        <label>Slug</label>
        <input class='form-control' name='slug' :value='workingCopy.slug' readonly>
      </div>
      ${form_input('title')}
      ${form_input('artist')}
      ${form_input('source')}
      ${form_input('video')}
      <div class='form-group'>
        <label>Content</label>
        <textarea class='form-control' name='content'
                  :value='workingCopy.content'></textarea>
      </div>
      <div class='buttons'>
        <button class='btn btn-default' @click.prevent='cancel'>Cancel</button>
        <button type='submit' class='btn btn-primary'>Submit</button>
      </div>
    </form>
  </main>
</div>

<script src='http://code.jquery.com/jquery-3.1.1.min.js'></script>
<script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/axios/0.15.3/axios.min.js'></script>
<script src='${ROOT}js/cms.js'></script>

</body>
